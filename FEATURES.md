# EasyScreenRecord 機能追加計画

このドキュメントでは、今後追加予定の機能をまとめています。

## 現状の設定 UI

現在は設定が1つの画面に混在している状態。

## 目標の設定 UI 構成

| タブ | 内容 |
|------|------|
| 一般 | 保存先、フレームレート、品質、カーソル表示 |
| ショートカット | キーボードショートカットのカスタマイズ |
| クリックエフェクト | マウスクリックの可視化設定 |
| ズーム | スマートズーム関連設定（既存機能を移動） |

---

## 追加機能一覧

### 1. ショートカット設定

**優先度: 高**

#### 機能

| ショートカット | デフォルト | 説明 |
|---------------|-----------|------|
| 録画開始/停止 | `Cmd+Shift+R` | グローバルホットキーで録画制御 |
| 一時停止/再開 | `Cmd+Shift+P` | 録画中の一時停止 |
| 手動ズーム切替 | `Cmd+Shift+Z` | 任意タイミングでズームイン/アウト |
| フルスクリーン録画 | `Cmd+Shift+F` | 範囲選択なしで即録画開始 |

#### 設定項目

- [ ] ショートカットのカスタマイズ UI
- [ ] キーバインドの競合検出
- [ ] ショートカットのリセット機能

#### 実装に必要なもの

- `HotkeyManager.swift` - グローバルホットキーの登録・管理
- `ZoomSettings` への設定プロパティ追加
- 設定 UI（ShortcutSettingsView）

---

### 2. クリックエフェクト

**優先度: 中**

#### 機能

| 設定 | 説明 |
|------|------|
| クリックハイライト | マウスクリック時に波紋/円を表示 |
| カーソルハイライト | カーソル周辺を常時ハイライト（オプション） |
| 左クリック色 | 左クリック時の色（デフォルト: 青） |
| 右クリック色 | 右クリック時の色（デフォルト: 赤） |
| エフェクトサイズ | ハイライトの直径（ピクセル） |
| 表示時間 | エフェクトの持続時間（秒） |

#### 設定項目

- [ ] クリックエフェクト ON/OFF
- [ ] エフェクトの種類（波紋、円、点滅）
- [ ] 色のカスタマイズ
- [ ] サイズ調整スライダー
- [ ] 持続時間調整

#### 実装に必要なもの

- `ClickEffectSettings` モデル（または ZoomSettings に追加）
- `ClickEffectRenderer.swift` - クリックエフェクトの描画
- 録画フレームへのエフェクト合成ロジック
- 設定 UI（ClickEffectSettingsView）

#### 技術的な課題

- 録画映像にエフェクトを合成する必要がある
- パフォーマンスへの影響を最小限にする
- 座標系の変換（スクリーン座標 → 録画領域座標）

---

### 3. 一時停止/再開機能

**優先度: 中**

#### 機能

- 録画中に一時停止可能
- 再開時はシームレスに継続
- 一時停止中は録画インジケーター点滅

#### 実装に必要なもの

- `ScreenRecorder` にステート追加（`.paused`）
- AVAssetWriter のセッション管理
- メニューバー UI の更新

---

### 4. UI タブ構成の変更

**優先度: 高**

現在の ContentView の設定セクションを4つのタブに分割：

```
TabView {
    GeneralSettingsView()      // 一般
    ShortcutSettingsView()     // ショートカット
    ClickEffectSettingsView()  // クリックエフェクト
    ZoomSettingsView()         // ズーム
}
```

---

## 実装ロードマップ

### Phase 1: 基盤整備
- [ ] 設定 UI を4タブ構成に変更
- [ ] ZoomSettings のプロパティ整理

### Phase 2: ショートカット機能
- [ ] HotkeyManager の実装
- [ ] グローバルホットキー登録
- [ ] ショートカット設定 UI

### Phase 3: クリックエフェクト
- [ ] クリック検出の拡張（現在は double-click のみ）
- [ ] エフェクト描画ロジック
- [ ] 録画への合成
- [ ] 設定 UI

### Phase 4: 追加機能
- [ ] 一時停止/再開
- [ ] キーストローク表示（オプション）

---

## 参考

### 他のスクリーンレコーダーの機能（CleanShot など）

- グローバルショートカット
- クリックハイライト
- キーストローク表示
- カウントダウンタイマー
- 録画履歴
- GIF 出力
- クイック編集

### 現在の EasyScreenRecord の強み

- スマートズーム（自動カーソル追従）
- 軽量なメニューバーアプリ
- 字幕自動生成
- 範囲選択録画

---

## メモ

- クリックエフェクトは録画映像に直接描画する必要がある
- グローバルホットキーには Accessibility 権限が必要（既に取得済み）
- 設定は UserDefaults で永続化（既存の仕組みを活用）
